# 專案 04：多類別水果偵測 (Fruit Detection)

## 專案目標
本專案的核心目標是從「單類別物件偵測」**進階**到「**多類別物件偵測**」，並在一個更接近真實世界的複雜資料集上，完整地應用與鞏固遷移學習的工作流程。

## 使用資料集
* **名稱**: Fruit Detection and Classification (Kaggle)
* **關鍵特性**:
    * **多類別**: 資料集包含多種水果類別 (如蘋果、香蕉、橘子等)。
    * **TXT 標註格式**: 標註檔從前一個專案的單一 `.csv` 檔案，變成了業界極為流行的 **YOLO-style `.txt` 格式**，即一張圖片對應一個同名的 `.txt` 標註檔。

## 學習到的關鍵技術

1.  **處理多樣化標註格式**:
    * 成功學會了解析 `.txt` 檔案，並理解其 `[class_id, x, y, w, h]` 的結構。
    * 建立了從類別 ID (數字) 到類別名稱 (字串) 的對應關係 (`CLASS_MAPPING`)。

2.  **客製化 `Dataset` 的進階應用**:
    * 基於前一個專案的經驗，成功地將 `WheatDataset` **改造**為更通用的 `FruitDataset`。
    * 掌握了新的 `Dataset` 寫法：不再依賴 `pandas` DataFrame，而是透過 `os.listdir()` 直接索引圖片檔名，並動態地讀取對應的 `.txt` 標註檔。

3.  **掌握 `collate_fn` 的用法**:
    * 深刻理解了為什麼物件偵測在批次訓練 (`batch_size > 1`) 時會遇到困難（因為每張圖的標註框數量不同）。
    * 學會了撰寫自訂的 `collate_fn` 函式，並將其傳入 `DataLoader`，這是處理複雜資料結構、實現高效訓練的**專業核心技能**。

4.  **鞏固物件偵測的遷移學習流程**:
    * 再次熟練了載入 `torchvision` 預訓練偵測模型 (`fasterrcnn_resnet50_fpn`) 的方法。
    * 驗證了透過傳遞 `num_classes` 參數來自動替換分類頭的便捷方法。

## 最終成果與分析
* **基準模型 (Baseline Model)**：在訓練 5 個 Epochs 後，模型在驗證集上取得了以下成果：
    * **`mAP @ IoU=0.50`**: `0.2890` (約 29%)
    * **`mAP @ IoU=0.50:0.95` (主要指標)**: `0.1190` (約 12%)
* **成果分析**: 這個分數是一個非常典型的**基準模型**分數。它證明了整個流程是通暢且有效的，模型確實學會了一些東西（`map_50` 的分數證明了它能找到物體的大致位置）。這個分數是後續所有模型優化的**起點**，而不是終點。可能的優化方向包括：增加訓練時間、導入更強的資料增強 (Albumentations)、調整超參數等。